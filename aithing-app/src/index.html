<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIThing</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app" class="app-container">
        <!-- Main Notch Container -->
        <div class="notch-container" id="notchContainer">
            <!-- Sidebar -->
            <div class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <button class="sidebar-toggle-btn" id="sidebarToggleBtn" title="Toggle Sidebar">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <line x1="9" y1="3" x2="9" y2="21"/>
                        </svg>
                    </button>
                    <button class="new-chat-btn" id="newChatBtn" title="New Chat">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19"/>
                            <line x1="5" y1="12" x2="19" y2="12"/>
                        </svg>
                    </button>
                </div>
                <div class="sidebar-content" id="sidebarContent">
                    <div class="chat-list" id="chatList">
                        <!-- Chat history items will be dynamically added -->
                    </div>
                    <div class="no-chats" id="noChats">No chats</div>
                </div>
                <div class="sidebar-footer">
                    <button class="settings-btn" id="settingsBtn" title="Settings">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                        </svg>
                        <span class="settings-text">Settings</span>
                    </button>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="main-area" id="mainArea">
                <!-- Intelligence View (Chat) -->
                <div class="intelligence-view" id="intelligenceView">
                    <!-- Title Bar -->
                    <div class="title-bar">
                        <div class="window-controls">
                            <button class="control-dot close" id="closeBtn" title="Close"></button>
                        </div>
                        <input type="text" class="title-input" id="titleInput" value="New Chat" placeholder="Enter Title">
                        <span class="last-updated" id="lastUpdated"></span>
                    </div>

                    <div class="divider"></div>

                    <!-- Chat Area -->
                    <div class="chat-area" id="chatArea">
                        <!-- Welcome Message -->
                        <div class="welcome-message" id="welcomeMessage">
                            <div class="greeting" id="greeting"></div>
                            <div class="subheading" id="subheading"></div>
                        </div>

                        <!-- Chat Messages -->
                        <div class="messages" id="messages">
                            <!-- Messages will be dynamically added -->
                        </div>

                        <!-- Loading Indicator -->
                        <div class="loading-indicator hidden" id="loadingIndicator">
                            <div class="tool-call" id="toolCall"></div>
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div class="input-area" id="inputArea">
                        <div class="input-container" id="inputContainer">
                            <textarea
                                id="messageInput"
                                placeholder="Ask anything on AI Thing..."
                                rows="1"
                            ></textarea>
                        </div>
                        <div class="animated-border hidden" id="animatedBorder"></div>
                    </div>

                    <!-- Context Bar -->
                    <div class="context-bar" id="contextBar">
                        <div class="context-items" id="contextItems">
                            <!-- Dropped files/images will appear here -->
                        </div>
                        <button class="context-btn" id="textSelectionBtn" title="Text Selection">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="17" y1="10" x2="3" y2="10"/>
                                <line x1="21" y1="6" x2="3" y2="6"/>
                                <line x1="21" y1="14" x2="3" y2="14"/>
                                <line x1="17" y1="18" x2="3" y2="18"/>
                            </svg>
                            <span>Text Selection</span>
                        </button>
                        <button class="context-btn hidden" id="viewToolsBtn" title="View Tools">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
                            </svg>
                            <span>View Tools</span>
                        </button>
                    </div>
                </div>

                <!-- Settings View -->
                <div class="settings-view hidden" id="settingsView">
                    <!-- Title Bar -->
                    <div class="title-bar">
                        <div class="window-controls">
                            <button class="control-dot close" id="settingsCloseBtn" title="Close"></button>
                        </div>
                        <span class="settings-title">Settings</span>
                        <button class="check-updates-btn" id="checkUpdatesBtn">Check for Updates</button>
                    </div>

                    <div class="divider"></div>

                    <!-- Settings Tabs -->
                    <div class="settings-tabs" id="settingsTabs">
                        <button class="settings-tab active" data-tab="account">Account</button>
                        <button class="settings-tab" data-tab="models">Models</button>
                        <button class="settings-tab" data-tab="agents">Agents</button>
                        <button class="settings-tab" data-tab="preferences">Preferences</button>
                    </div>

                    <!-- Settings Content -->
                    <div class="settings-content" id="settingsContent">
                        <!-- Account Tab -->
                        <div class="settings-panel" id="accountPanel">
                            <div class="account-section">
                                <div class="account-status" id="accountStatus">
                                    <div class="not-signed-in">
                                        <p>Sign in to sync your settings across devices</p>
                                        <button class="sign-in-btn" id="signInBtn">Sign in with Google</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Models Tab -->
                        <div class="settings-panel hidden" id="modelsPanel">
                            <!-- Anthropic -->
                            <div class="model-group">
                                <div class="model-group-header">Anthropic</div>
                                <div class="model-list" id="anthropicModels">
                                    <!-- Models will be dynamically added -->
                                </div>
                                <div class="api-key-section">
                                    <label>API Key</label>
                                    <input type="password" class="api-key-input" id="anthropicApiKey" placeholder="sk-ant-...">
                                    <span class="api-key-hint">Get your API key at <a href="https://console.anthropic.com/settings/keys" target="_blank">Anthropic</a></span>
                                </div>
                            </div>

                            <!-- OpenAI -->
                            <div class="model-group">
                                <div class="model-group-header">OpenAI</div>
                                <div class="model-list" id="openaiModels">
                                    <!-- Models will be dynamically added -->
                                </div>
                                <div class="api-key-section">
                                    <label>API Key</label>
                                    <input type="password" class="api-key-input" id="openaiApiKey" placeholder="sk-...">
                                    <span class="api-key-hint">Get your API key at <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI</a></span>
                                </div>
                            </div>

                            <!-- Google -->
                            <div class="model-group">
                                <div class="model-group-header">Google</div>
                                <div class="model-list" id="googleModels">
                                    <!-- Models will be dynamically added -->
                                </div>
                                <div class="api-key-section">
                                    <label>API Key</label>
                                    <input type="password" class="api-key-input" id="googleApiKey" placeholder="AIza...">
                                    <span class="api-key-hint">Get your API key at <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a></span>
                                </div>
                            </div>

                            <p class="model-disclaimer">AI can make mistakes. Perform irreversible tasks carefully.</p>
                        </div>

                        <!-- Agents Tab -->
                        <div class="settings-panel hidden" id="agentsPanel">
                            <div class="agents-header">
                                <span>MCP Agents</span>
                                <button class="add-agent-btn" id="addAgentBtn">+ Add Agent</button>
                            </div>
                            <div class="agents-list" id="agentsList">
                                <div class="no-agents">No agents configured</div>
                            </div>
                        </div>

                        <!-- Preferences Tab -->
                        <div class="settings-panel hidden" id="preferencesPanel">
                            <div class="preference-item">
                                <div class="preference-info">
                                    <span class="preference-label">Show in screenshots</span>
                                    <span class="preference-desc">When disabled, the window will be hidden from screen recordings and screenshots</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="showInScreenshot">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="preference-item">
                                <div class="preference-info">
                                    <span class="preference-label">Use captured screenshots</span>
                                    <span class="preference-desc">Automatically add screenshots to context when captured</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="useCapturedScreenshots">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="preference-item">
                                <div class="preference-info">
                                    <span class="preference-label">Open at login</span>
                                    <span class="preference-desc">Start AIThing when you log in</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="openAtLogin">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="preference-item">
                                <div class="preference-info">
                                    <span class="preference-label">Keyboard shortcut</span>
                                    <span class="preference-desc">Toggle visibility with Ctrl+Option+Space</span>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="shortcutsEnabled" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="preference-actions">
                                <button class="quit-btn" id="quitBtn">Quit AIThing</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Logo Shape (for collapsed state) -->
        <div class="logo-container hidden" id="logoContainer">
            <svg class="logo" viewBox="0 0 1024 1024" fill="currentColor">
                <polygon points="143 711 363.51 294.99 585 711 143 711"/>
                <rect x="626" y="298" width="97" height="413"/>
                <rect x="785" y="298" width="97" height="97"/>
                <circle cx="528" cy="345" r="50"/>
            </svg>
            <div class="notification-dot hidden" id="notificationDot"></div>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>
